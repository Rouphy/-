# 0723

### 接口测试流程

1. 由开发提供接口测试文档
2. 根据接口测试文档提取测试点
3. 编写接口测试用例
   - 设计正常异常测试用例，正常验证接口逻辑是否正确，根据接口业务逻辑、输入参数，查看响应数据是否与预期结果一致
   - 异常用例，不按照接口文档上的要求输入参数，来验证接口对异常情况的校验（参数的类型、参数的长度、参数是否必传、是否加密、关联数据的获取）
4. 接口测试用例评审
5. 搭建接口测试环境
6. 构建接口请求，执行接口测试用例，引入参数化、断言、连接数据库进行垃圾数据回收、异常处理等
7. 提交bug，跟踪bug，进行回归测试，bug修复后
8. 编写接口测试报告，评估接口测试结果，准备功能测试

### Fiddler的工作原理

Fiddler其实就是客户端和服务器之间起到了一个代理的作用，它可以监听客户端和服务器的HTTP通信，抓取拦截网页HTTP及HTTPS请求与响应数据，篡改请求和响应报文，进行弱网测试等

### Fiddler常用功能

- 当测试出现bug时，可以通过Fiddler抓取拦截网页HTTP及HTTPS请求与响应数据进行分析是客户端问题还是服务端问题
- 可进行简单接口测试，通过抓包获取接口的入参和返回值
- 篡改请求和响应数据，测试对应的逻辑处理能力
- 弱网测试，模拟出不同的网络速度
- 设置拦截规则，抓取指定的接口请求
- 远程连接抓取app请求响应数据

### 一个接口请求不通（或者网页无法访问），该如何排除问题

1. 先排除自身操作问题，ip或者端口号或者url写错了
2. 客户端和服务端网络不通
3. 服务端项目根本没有部署起来
4. 服务器的防火墙拦截了
5. 服务端程序内部发生了错误
6. 没有访问权限（比如缺乏token、cookie之类）
7. 客户端设置了网络代理，如果是浏览器访问，是不是绑定了错误的主机地址

### 接口测试要关注哪些内容

- 接口的业务功能是否实现
- 发送给服务器的正常异常请求参数，服务器响应给客户端的信息是否和预期结果一致
- 接口在传输敏感数据是否加密处理，接口是否正确验证用户身份授权和防止未授权的访问
- 接口在不同负载条件下的响应时间是否符合需求

#### --接口测试我们还会关注

- 是否满足前提条件，有些接口需要满足前提，才可成功获取数据。常见的需要登录Token
- 是否携带默认值参数
- 正常用例：带默认值的参数都不填写、不传参，必填参数都填写正确且存在的常规值，其他不填写
- 结合业务规则、功能需求，接口参数说明，设计正常用例和异常用例
- 参数是否必填
- 参数之间是否存在关联
- 参数数据类型限制
- 参数数据类型自身的数据范围值限制
- 返回结果校验，数据库校验结果是否符合
- 接口安全验证（绕过身份验证，参数是否加密）

### 为什么要做接口测试及好处

1. 尽早介入测试，降低修复成本，接口测试可以检查UI界面无法发现的问题，绕过前端验证，测试后端
2. 接口测试深入到系统内部，直接对各模块之间的接口进行测试，接口测试完成，后端不变，前端任意变动
3. 接口测试可以通过自动化快速执行大量测试用例，提高测试效率
4. 测试接口可以在短时间内覆盖更多测试场景，一定比功能测试更快
5. 让测试人员更熟悉业务功能实现逻辑

### 如何判断一个bug是属于前端还是后端

- 根据经验来看，如果这个bug是界面排版布局，兼容性或者CSS/JS未加载完全或者请求超时都是属于前端bug
- 对于数据或者逻辑处理上的问题，我们则可以通过浏览器开发者工具、Fiddler工具进行抓包查看日志分析：
  - 对着接口文档，看请求参数的正确性，有问题就是前端发的数据问题，则为前端bug
  - 查看接口响应报文，响应的数据内容不正确，那就是后端处理出错导致的bug
- 还可以查看相关服务器报错日志，分析日志中的异常报错信息，查看数据库中的数据来判断前端还是后端问题

### 测试过程中、发现系统在特定环境下频繁出现数据错误，你会怎么一步步排查问题

1. 确认问题现象

   收集错误信息：详细记录系统报错信息，包括错误提示内容、出现错误的具体操作步骤等

   复现问题：尝试在相同环境下，按照用户提供的操作步骤再次执行，确认问题是否稳定复现，若能复现，可更好地进行后续排查；若不能，查看是否存在操作遗漏或环境未完全一致等情况再重复测试

2. 检查测试环境

   查看服务器硬件状态，如CPU使用率、内存占用、磁盘空间等是否存在异常

   高CPU使用率或内存不足可能导致系统处理数据出错；磁盘空间不足可能影响数据读写

3. 抓包分析数据流向

   查看请求数据：检查输入数据的格式、类型、取值范围是否符合系统要求

   例如，是否存在本应输入数据却输入了字符的情况；数据是否存在缺失值、异常值等

   查看响应数据：检查输入数据的展示或存储是否正确，如是否存在数据丢失、格式错误等问题，对比输出数据与原始输入数据及预期结果的差异

4. 与小组沟通排查

   与开发沟通：将问题现象、排查过程告知开发人员，共同分析代码逻辑和可能存在的问题，同时检查服务器配置、网络环境等，确保环境稳定且符合系统运行要求

