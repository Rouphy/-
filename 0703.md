# 0703

### APP某个功能失效了，如何排查是客户端还是服务端的问题

首先从功能检查开始，比如功能是否完全失效，有没有错误提示。然后,区分客户端和服务端的关键在于数据交互，所以抓包分析应该是重要步骤，查看请求是否发出，响应是否正常

1. 先明确功能失效的具体现象是功能无响应还是数据展示异常，观察是否错误提示，抓包是否无请求，服务端无日志基本可以确定是客户端问题，因客户端无法正常发起请求
2. 抓包有请求，服务端无日志，接口工具调用服务端正常,客户端或者网络问题,因为客户端请求未到达服务端
3. 抓包有请求，服务端有日志且报错，接口工具调用也报错,服务端问题,因为服务端接口逻辑错误
4. 接口工具调用正常，客户端接收响应后展示异常,客户端问题,因为客户端解析响应数据失败(本地逻辑错误)
5. 部分用户/设备正常，部分异常，接口工具调用正常,客户端兼容性或环境问题

### 什么是H5,怎么完成H5功能测试,H5测试和web网页测试有什么区别

1. H5也就是HTML5的应用,通常指移动端的网页应用,测试方面可能需要考虑移动端的特性,比如不同的浏览器、设备兼容性、触摸事件等等
2. H5测试和传统web项目测试的区别,首先H5主要运行在移动设备上(比如微信中的网页小程序),而web项目更多是浏览器中。所以测试时需要考虑移动设备的屏幕尺寸、分辨率、操作系统(iOS、Android),以及不同的移动浏览器(Chrome、微信内置浏览器等)
3. H5测试可能需要关注响应时长,因为移动设备屏幕大小各异,还要考虑触摸操作,比如点击、滑动、缩放等,而web 项目更多是鼠标操作,移动设备还需要考虑在 2G、3G、4G、5G或WiFi 下运行,需要测试不同网络条件下的性能
4. H5可能依赖于原生APP的容器,所以需要测试在不同容器中的表现,比如微信、支付宝、手机浏览器等,是否有兼容性问题

### 安装卸载升级测试点

#### app安装

- 软件在不同操作系统下安装是否正常。
- 软件安装后的是否能够正常运行，安装后的文件夹及文件是否写？
- 软件安装各个选项的组合是否符合概要设计说明
- 软件安装向导的UI测试
- 软件安装过程是否可以取消，点击取消后，写入的文件是否还存在
- 软件安装过程中意外情况的处理是否符合需求(如死机，重启，断电)
- 安装空间不足时是否有相应提示
- 安装后没有生成多余的目录结构和文件
- 对于需要通过网络验证之类的安装，在断网情况下尝试一下
- 还需要对安装手册进行测试，依照安装手册是否能顺利安装

#### app卸载

- 直接卸载，检查是否卸载干净。
- 用第三方工具卸载，检查是否卸载干净
- 卸載过程中，出现意外(比如手机关机，没电，查看信息，接打电话)，程序是否还能运行
- 在卸载过程中，突然重启设备，再次访问程序，是否还能运行
- 在没有使用程序时，删除目录文件，看程序是否能运行
- 在使用过程中，直接删除目录文件，程序是否还能运行
- 不同系统、硬件环境、网络环境下进行卸载
- 卸载成功后，是否对其他程序有影响
- 卸载后再次安装，是否正常使用
- 在卸载过程中，所有的提示信息不能出现代码、符号、乱码等

### 性能测试怎么做的?

参考答案:
比如，我这个xxx项目的性能测试是这样做的:

1. 做性能需求分析,挑选了用户使用最频繁的功能来做性能测试,比如:登陆，打开系统首页，搜索，提交订单，确定性能指标，比如:事务通过率为100%，90%的事务响应时间不超过3秒，CPU和内存的使用率为70%以下(*)
2. 搭建性能测试环境，准备好性能测试数据，性能测试数据，包括基础数据和使用数据两部分。(*)(PS:性能测试数据，包括基础数据和使用数据，如果我们要测试系统半年内是否能稳定提供服务，就要在估算一下半年内，系统会有多少数据，然后在数据库上导入对应量的数据，这叫基础数据;使用数据，就是我们测试过程中需要用到的参数化的数据)
3. 使用Jmeter工具，录制脚本，并优化，包括:参数化，断言，关联等。
4. 设计性能测试场景，我们这个项目做了单用户单功能循环200次的基准测试，1200，1600,2000个用户，执行15分钟的压力测试，看系统最佳的并发用户数，还有看系统有没有性能瓶颈;
5. 我们搭建了分布式压力测试环境进行测试,每台压力机并发800个用户并监控linux服务器的CPU，内存，IO。
6. 分析性能测试结果，如果有问题(性能瓶颈),收集相关的日志提单给开发修改(*)
7. 开发修改好后，回归性能测试(*)
8. 编写性能测试报告,提供建议和更改措施(*)

### 如何确定系统能够承载的最大用户数?

参考答案：

通过负载测试，不断增加用户数，随着用户数的增加，各项性能指标也会相应产生变化，当出现了性能拐点，比如，当用户数达到某个数量级时，响应时间突然增长，那么这个拐点处对应的用户数就是系统能承载的最大用户数。

### 你怎么理解内存泄漏和内存溢出

#### 内存泄漏:

是指程序在申请内存后，无法释放已申请的内存空间，导致系统无法及时回收内存并且分配给其他进程使用。
通常少次数的内存无法及时回收并不会到程序造成什么影响，但是如果在内存本身就比较少获取多次导致内存无法正常回收时，就会导致内存不够用，最终导致内存泄漏。

#### 内存溢出（OOM-Out of Memory）：

1) 指程序申请内存时，没有足够的内存供申请者使用1M实际要占用2M内存，就说分配的内存不够，导致内存溢出
2) 给了你一块存储int类型数据的存储空间，但是你却存储long类型的数据
3) 长期出现内存泄漏，导致系统内存越用越少，最终导致内存不够用,导致系统崩溃，出现OOM

### 如何监控服服务器资源?

参考答案：

首页在jmeter安装资源监控插件，比如服务器资源的监控插件(有CPU/内存/IO等)、事务通过率的监控插件、点击率、响应时间的监控插件等。然后在Linux服务器上安装ServerAgent代理工具，对该工具进行解压、赋权，最后开启代理服务，运行Jmeter脚本，就可以通过Jmeter插件监控到服务器的资源了。

如果系统的性能指标达不到预期，需要对系统进行优化以提高性能。以下是一些常见的优化意见:
性能测试不通过怎么处理优化建议和改进措施参考:

1. 分析系统性能瓶颈资源优化：根据测试结果，评估系统的资源利用率，例如CPU、内存和磁盘等，提供建议以优化资源的使用，如调整配置、增加硬件资源等。
2. 代码优化：减少数据库查询次数、优化算法和数据结构等。
3. 并发处理：增加并发连接数提高并发处理能力、优化线程池配置等。
4. 缓存策略：使用缓存中间件Redis数据库,减少对数据库访问频次,减少服务器负担。
5. 数据库优化：根据测试结果，评估系统的数据库性能，提供数据库优化的建议，如优化查询语句、建立合适的索引和分区等。
6. 日志和监控：提供日志和监控方面的建议，如增加详细的日志记录、设置合适的告警和监控指标等，定期进行性能回归测试以便及时发现和解决性能问题。
7. 测试环境调整：确保性能测试与生产环境尽可能一致,避免环境差异导致的性能问题,不断调整测试参数(并发用户数，请求频率，经过不断测试得到最稳定的并发用户数)

### 性能测试报告中都包含了哪些内容

包含概述（测试目的、测试背景）、执行情况（测试方法、测试环境），展示测试案例与结果，提出优化建议，最后总结关键结论，判断系统是否符合性能要求。